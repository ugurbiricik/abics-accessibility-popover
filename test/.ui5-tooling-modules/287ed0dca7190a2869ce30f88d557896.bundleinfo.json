{
  "_entries": [
    {
      "name": "new-npm-package",
      "path": "C:\\Users\\UgurBiricik\\Desktop\\ts\\package\\index.js",
      "lastModified": 1750411435012,
      "type": "module",
      "originalName": "index",
      "code": "sap.ui.define(['exports', 'sap/ui/model/json/JSONModel', 'sap/ui/core/Fragment'], (function (exports, JSONModel, Fragment) { 'use strict';\n\n  const popoverModules = [\r\n    {\r\n      icon: \"sap-icon://text-formatting\",\r\n      name: \"Schriftgröße\",\r\n      expandable: true,\r\n\r\n    },\r\n    {\r\n      icon: \"sap-icon://contrast\",\r\n      name: \"Kontrastmodus\",\r\n      expandable: true,\r\n\r\n    },\r\n    {\r\n      icon: \"sap-icon://brightness\",\r\n      name: \"Blaufilter  \",\r\n      expandable: true,\r\n\r\n    },\r\n    {\r\n      icon: \"sap-icon://night-view\",\r\n      name: \"Nachtmodus\",\r\n      expandable: true,\r\n\r\n    },\r\n    {\r\n      icon: \"sap-icon://microphone\",\r\n      name: \"Webseite vorlesen\",\r\n      expandable: true,\r\n\r\n    },\r\n    {\r\n      icon: \"sap-icon://keyboard-and-mouse\",\r\n      name: \"Tab Navigation\",\r\n      expandable: true,\r\n\r\n    },\r\n    {\r\n      icon: \"sap-icon://palette\",\r\n      name: \"Farbschwäche\",\r\n      expandable: true,\r\n\r\n    },\r\n    {\r\n      icon: \"sap-icon://picture\",\r\n      name: \"Bilder ausblenden\",\r\n      expandable: true,\r\n\r\n    }\r\n  ];\n\n  // Bu bayrak, stilin daha önce yüklenip yüklenmediğini kontrol etmek için\r\n  // bu modülün içinde saklanır. Dışarıdan erişilemez.\r\n  let isCustomStyleLoaded = false;\r\n\r\n  /**\r\n   * Uygulamanın <head> bölümüne özel stil dosyasını yalnızca bir kez ekler.\r\n   * Bu fonksiyon, paketin 'package.json' dosyasındaki adını bilir.\r\n   */\r\n  function loadCustomStyleOnce() {\r\n    // Eğer daha önce yüklendiyse, hiçbir şey yapmadan çık.\r\n    if (isCustomStyleLoaded) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // 1. ADIM: Yolu dinamik ve güvenilir bir şekilde al.\r\n      // DİKKAT: \"new-npm-package\" kısmını kendi paket adınızla değiştirmelisiniz.\r\n      // Örnekte \"ui5_bfsg_popover\" kullanmıştınız, o şekilde de olabilir.\r\n      const sCorrectPath = sap.ui.require.toUrl(\"new-npm-package/css/style.css\");\r\n\r\n      // 2. ADIM: Link etiketini oluştur ve ekle\r\n      const link = document.createElement(\"link\");\r\n      link.id = \"new-npm-package-styles\"; // Tekrar kontrol için benzersiz bir ID ata.\r\n      link.rel = \"stylesheet\";\r\n      link.type = \"text/css\";\r\n      link.href = sCorrectPath; // Doğru ve dinamik yolu kullan.\r\n      document.head.appendChild(link);\r\n      \r\n      // 3. ADIM: Bayrağı güncelle ki bir daha yüklenmesin.\r\n      isCustomStyleLoaded = true;\r\n      console.log(\"Custom CSS loaded successfully from:\", sCorrectPath);\r\n    } catch (error) {\r\n        console.error(\"Failed to load custom CSS:\", error);\r\n    }\r\n  }\n\n  // Bu modül, tüm sayfanın yazı tipi boyutunu doğrudan DOM manipülasyonu ile yönetir.\r\n\r\n  // Yazı tipi boyutunu piksel cinsinden saklar. Varsayılan 16px.\r\n  let _currentFontSize = 16;\r\n  const MAX_SIZE = 40; // Maksimum 40px\r\n  const MIN_SIZE = 10; // Minimum 10px\r\n\r\n  /**\r\n   * Tüm sayfadaki elementlerin yazı tipi boyutunu uygular.\r\n   * @param {number} fontSize - Uygulanacak yazı tipi boyutu (px).\r\n   */\r\n  function _applyFontSizeToBody(fontSize) {\r\n      console.log(`Applying font size: ${fontSize}px to the entire page.`);\r\n      \r\n      // Tüm sayfadaki her elementi seç. Bu performans açısından maliyetlidir.\r\n      const allElements = document.querySelectorAll('body, body *');\r\n      \r\n      allElements.forEach(element => {\r\n          // !important eklemek, UI5'in kendi inline stillerini bile ezebilir.\r\n          // Ancak bu, stil çakışmalarına neden olabileceğinden dikkatli kullanılmalıdır.\r\n          element.style.setProperty('font-size', `${fontSize}px`, 'important');\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Yazı tipi boyutunu bir kademe artırır.\r\n   */\r\n  function increaseFontSize() {\r\n      if (_currentFontSize < MAX_SIZE) {\r\n          _currentFontSize += 2; // 2px artır\r\n          _applyFontSizeToBody(_currentFontSize);\r\n      }\r\n  }\r\n\r\n  /**\r\n   * Yazı tipi boyutunu bir kademe azaltır.\r\n   */\r\n  function decreaseFontSize() {\r\n      if (_currentFontSize > MIN_SIZE) {\r\n          _currentFontSize -= 2; // 2px azalt\r\n          _applyFontSizeToBody(_currentFontSize);\r\n      }\r\n  }\n\n  const openPopover = async (controller, oEvent) => {\r\n    const oView = controller.getView();\r\n    const sFragmentId = oView.getId();\r\n\r\n    if (!controller._pPopover) {\r\n      // CSS'i sadece bir kez yükle\r\n      loadCustomStyleOnce();\r\n\r\n      // Fragment'ı yükle ve TÜM kurulumu .then() bloğunun içinde yap\r\n      controller._pPopover = Fragment.load({\r\n        id: sFragmentId,\r\n        name: \"new-npm-package.Popover\",\r\n      }).then((oPopover) => {\r\n        // 1. Fragment'ı View'e bağımlı yap\r\n        oView.addDependent(oPopover);\r\n\r\n        // 2. Modeli burada ata\r\n        const aModulesData = popoverModules;\r\n        const oModulesModel = new JSONModel({ items: aModulesData });\r\n        oPopover.setModel(oModulesModel, \"modules\");\r\n\r\n        // 3. Butonları burada bul ve olayları ata\r\n        // Bu noktada butonların var olduğu %100 garantidir.\r\n        const increaseButton = Fragment.byId(sFragmentId, \"increaseFontButton\");\r\n        const decreaseButton = Fragment.byId(sFragmentId, \"decreaseFontButton\");\r\n        const closeButton = Fragment.byId(sFragmentId, \"closePopoverButton\");\r\n\r\n        console.log(\"Finding buttons -> Increase:\", increaseButton, \"Decrease:\", decreaseButton);\r\n\r\n        if (increaseButton) {\r\n          increaseButton.attachPress(increaseFontSize);\r\n        }\r\n        if (decreaseButton) {\r\n          decreaseButton.attachPress(decreaseFontSize);\r\n        }\r\n        if (closeButton) {\r\n          closeButton.attachPress(() => oPopover.close());\r\n        }\r\n\r\n        // 4. Kurulumu tamamlanmış Popover'ı Promise'in sonucu olarak döndür\r\n        return oPopover;\r\n      });\r\n    }\r\n\r\n    // Promise'in çözülmesini ve hazır Popover'ı almayı bekle\r\n    const oPopover = await controller._pPopover;\r\n    \r\n    // Popover'ı aç\r\n    oPopover.openBy(oEvent.getSource());\r\n  };\n\n  const __esModule = true ;\n\n  exports.__esModule = __esModule;\n  exports.openPopover = openPopover;\n\n}));\n",
      "relatedPaths": [
        "C:\\Users\\UgurBiricik\\Desktop\\ts\\package\\popoverModules.js",
        "C:\\Users\\UgurBiricik\\Desktop\\ts\\package\\js\\cssLoader.js",
        "C:\\Users\\UgurBiricik\\Desktop\\ts\\package\\js\\fontsize.js",
        "C:\\Users\\UgurBiricik\\Desktop\\ts\\package\\index.js"
      ],
      "imports": [
        "sap/ui/model/json/JSONModel",
        "sap/ui/core/Fragment"
      ],
      "dynamicImports": [],
      "generated": false,
      "isWebComponent": false,
      "isEntryPoint": true
    }
  ]
}