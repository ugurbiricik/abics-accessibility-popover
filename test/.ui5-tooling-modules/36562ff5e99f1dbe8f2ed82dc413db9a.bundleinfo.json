{
  "_entries": [
    {
      "name": "new-npm-package",
      "path": "C:\\Users\\UgurBiricik\\Desktop\\ts\\package\\index.js",
      "lastModified": 1750420471004,
      "type": "module",
      "originalName": "index",
      "code": "sap.ui.define(['exports', 'sap/ui/model/json/JSONModel', 'sap/ui/core/Fragment'], (function (exports, JSONModel, Fragment) { 'use strict';\n\n  const popoverModules = [\r\n    {\r\n      icon: \"sap-icon://text-formatting\",\r\n      name: \"Schriftgröße\",\r\n      expandable: true,\r\n\r\n    },\r\n    {\r\n      icon: \"sap-icon://paint-bucket\",\r\n      name: \"Kontrastmodus\",\r\n      expandable: true,\r\n\r\n    },\r\n    {\r\n      icon: \"sap-icon://light-mode\",\r\n      name: \"Blaufilter  \",\r\n      expandable: true,\r\n\r\n    },\r\n    {\r\n      icon: \"sap-icon://dark-mode\",\r\n      name: \"Nachtmodus\",\r\n      expandable: true,\r\n\r\n    },\r\n    {\r\n      icon: \"sap-icon://microphone\",\r\n      name: \"Webseite vorlesen\",\r\n      expandable: true,\r\n\r\n    },\r\n    {\r\n      icon: \"sap-icon://keyboard-and-mouse\",\r\n      name: \"Tab Navigation\",\r\n      expandable: true,\r\n\r\n    },\r\n    {\r\n      icon: \"sap-icon://palette\",\r\n      name: \"Farbschwäche\",\r\n      expandable: true,\r\n\r\n    },\r\n    {\r\n      icon: \"sap-icon://picture\",\r\n      name: \"Bilder ausblenden\",\r\n      expandable: true,\r\n\r\n    }\r\n  ];\n\n  // Bu bayrak, stilin daha önce yüklenip yüklenmediğini kontrol etmek için\r\n  // bu modülün içinde saklanır. Dışarıdan erişilemez.\r\n  let isCustomStyleLoaded = false;\r\n\r\n  /**\r\n   * Uygulamanın <head> bölümüne özel stil dosyasını yalnızca bir kez ekler.\r\n   * Bu fonksiyon, paketin 'package.json' dosyasındaki adını bilir.\r\n   */\r\n  function loadCustomStyleOnce() {\r\n    // Eğer daha önce yüklendiyse, hiçbir şey yapmadan çık.\r\n    if (isCustomStyleLoaded) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // 1. ADIM: Yolu dinamik ve güvenilir bir şekilde al.\r\n      // DİKKAT: \"new-npm-package\" kısmını kendi paket adınızla değiştirmelisiniz.\r\n      // Örnekte \"ui5_bfsg_popover\" kullanmıştınız, o şekilde de olabilir.\r\n      const sCorrectPath = sap.ui.require.toUrl(\"new-npm-package/css/style.css\");\r\n\r\n      // 2. ADIM: Link etiketini oluştur ve ekle\r\n      const link = document.createElement(\"link\");\r\n      link.id = \"new-npm-package-styles\"; // Tekrar kontrol için benzersiz bir ID ata.\r\n      link.rel = \"stylesheet\";\r\n      link.type = \"text/css\";\r\n      link.href = sCorrectPath; // Doğru ve dinamik yolu kullan.\r\n      document.head.appendChild(link);\r\n      \r\n      // 3. ADIM: Bayrağı güncelle ki bir daha yüklenmesin.\r\n      isCustomStyleLoaded = true;\r\n      console.log(\"Custom CSS loaded successfully from:\", sCorrectPath);\r\n    } catch (error) {\r\n        console.error(\"Failed to load custom CSS:\", error);\r\n    }\r\n  }\n\n  // ts/js/fontsize.js (Güncellenmiş ve Modüler Hali)\r\n\r\n  let _defaultFontSize = null; // Orijinal yazı tipi boyutunu saklamak için\r\n\r\n  // Dışarıdan verilecek olan settingsModel'i tutacak referans\r\n  let _settingsModel$1 = null;\r\n\r\n  /**\r\n   * Bu modülü, ayarları tutacak olan JSONModel ile başlatır.\r\n   * @param {sap.ui.model.json.JSONModel} oSettingsModel - {fontStep: 0} gibi veri içeren model.\r\n   */\r\n  const initFontSizer = (oSettingsModel) => {\r\n      // Orijinal yazı tipi boyutunu sadece bir kez al ve sakla\r\n      if (!_defaultFontSize) {\r\n          _defaultFontSize = window.getComputedStyle(document.documentElement).getPropertyValue(\"font-size\");\r\n      }\r\n      _settingsModel$1 = oSettingsModel;\r\n  };\r\n\r\n  /**\r\n   * Yazı tipi boyutunu, modeldeki adıma göre ayarlar.\r\n   */\r\n  const _updateView = () => {\r\n      if (_settingsModel$1 && _defaultFontSize) {\r\n          const step = _settingsModel$1.getProperty(\"/fontStep\");\r\n          // 'calc' kullanarak orijinal boyuta göre hesaplama yapmak en sağlıklısı.\r\n          // Her adımı 2px olarak ayarlayalım.\r\n          const newSize = `calc(${_defaultFontSize} + ${step * 2}px)`;\r\n          document.documentElement.style.fontSize = newSize;\r\n      }\r\n  };\r\n\r\n  /**\r\n   * Sayaç adımını bir artırır ve görünümü günceller.\r\n   */\r\n  const onIncreaseFontSize = () => {\r\n      if (!_settingsModel$1) return;\r\n      let currentStep = _settingsModel$1.getProperty(\"/fontStep\");\r\n      if (currentStep < 5) { // Maksimum artış limiti\r\n          _settingsModel$1.setProperty(\"/fontStep\", currentStep + 1);\r\n          _updateView();\r\n      }\r\n  };\r\n\r\n  /**\r\n   * Sayaç adımını bir azaltır ve görünümü günceller.\r\n   */\r\n  const onDecreaseFontSize = () => {\r\n      if (!_settingsModel$1) return;\r\n      let currentStep = _settingsModel$1.getProperty(\"/fontStep\");\r\n      if (currentStep > -3) { // Maksimum azalış limiti\r\n          _settingsModel$1.setProperty(\"/fontStep\", currentStep - 1);\r\n          _updateView();\r\n      }\r\n  };\r\n\r\n  /**\r\n   * Yazı tipi boyutunu ve sayacı varsayılan değerlere sıfırlar.\r\n   */\r\n  const onResetFontSize = () => {\r\n      if (!_settingsModel$1) return;\r\n      _settingsModel$1.setProperty(\"/fontStep\", 0);\r\n      // Orijinal boyutu geri yükle\r\n      document.documentElement.style.fontSize = _defaultFontSize;\r\n  };\n\n  // ts/js/contrast.js (Yeni Dosya)\r\n\r\n  let _settingsModel = null;\r\n  const _rootElement = document.documentElement;\r\n  const HIGH_CONTRAST_CLASS = \"high-contrast-mode\";\r\n\r\n  /**\r\n   * Bu modülü, ayarları tutacak olan JSONModel ile başlatır.\r\n   * @param {sap.ui.model.json.JSONModel} oSettingsModel\r\n   */\r\n  const initContrastHandler = (oSettingsModel) => {\r\n      _settingsModel = oSettingsModel;\r\n      // Başlangıçta modeldeki değere göre sınıfı ayarla (sayfa yenilendiğinde durumu korumak için)\r\n      if (_settingsModel.getProperty(\"/contrastActive\")) {\r\n          _rootElement.classList.add(HIGH_CONTRAST_CLASS);\r\n      }\r\n  };\r\n\r\n  /**\r\n   * Kontrast modunu açar veya kapatır.\r\n   */\r\n  const onToggleContrast = () => {\r\n      if (!_settingsModel) return;\r\n\r\n      const bIsActive = _settingsModel.getProperty(\"/contrastActive\");\r\n      const bNewState = !bIsActive;\r\n\r\n      _settingsModel.setProperty(\"/contrastActive\", bNewState);\r\n      _rootElement.classList.toggle(HIGH_CONTRAST_CLASS, bNewState);\r\n  };\r\n\r\n  /**\r\n   * Kontrast seviyesini artırır.\r\n   */\r\n  const onIncreaseContrast = () => {\r\n      if (!_settingsModel) return;\r\n      let level = _settingsModel.getProperty(\"/contrastLevel\");\r\n      if (level < 150) { // Maksimum %150\r\n          level += 10;\r\n          _settingsModel.setProperty(\"/contrastLevel\", level);\r\n          _rootElement.style.setProperty('--contrast-level-dynamic', `${level}%`);\r\n      }\r\n  };\r\n\r\n  /**\r\n   * Kontrast seviyesini azaltır.\r\n   */\r\n  const onDecreaseContrast = () => {\r\n      if (!_settingsModel) return;\r\n      let level = _settingsModel.getProperty(\"/contrastLevel\");\r\n      if (level > 70) { // Minimum %70\r\n          level -= 10;\r\n          _settingsModel.setProperty(\"/contrastLevel\", level);\r\n          _rootElement.style.setProperty('--contrast-level-dynamic', `${level}%`);\r\n      }\r\n  };\n\n  // ts/index.js (Düzeltilmiş ve Çalışan Hali)\r\n\r\n\r\n  // Ayarlar modeli\r\n  const oSettingsModel = new JSONModel({\r\n      fontStep: 0,\r\n      contrastActive: false,\r\n      contrastLevel: 100\r\n  });\r\n\r\n  // Modül verileri modeli\r\n  const oModulesModel = new JSONModel({ items: popoverModules });\r\n\r\n\r\n  const openPopover = async (controller, oEvent) => {\r\n      const oView = controller.getView();\r\n      const sFragmentId = oView.getId();\r\n\r\n      if (!controller._pPopover) {\r\n          loadCustomStyleOnce();\r\n          initFontSizer(oSettingsModel);\r\n          initContrastHandler(oSettingsModel);\r\n\r\n          controller._pPopover = Fragment.load({\r\n              id: sFragmentId,\r\n              name: \"new-npm-package.Popover\",\r\n              // --- DÜZELTME BURADA ---\r\n              // 'controller' nesnesi içindeki fonksiyonlara, dışarıdaki 'oModulesModel'i\r\n              // parametre olarak veya doğrudan fonksiyonun kendisinden geçirebiliriz.\r\n              // En temizi, event'in kaynağını kullanmaktır.\r\n              controller: {\r\n                  onModuleItemPress: (oEvt) => {\r\n                      const oListItem = oEvt.getParameter(\"listItem\");\r\n                      const oContext = oListItem.getBindingContext(\"modules\");\r\n                      if (!oContext) return;\r\n\r\n                      // Hatanın kaynağı olan 'oModulesModel' yerine, event'in kaynağından\r\n                      // modele ulaşıyoruz. Bu en güvenli yöntemdir.\r\n                      const oModel = oContext.getModel();\r\n                      const sPath = oContext.getPath();\r\n                      const bCurrentExpanded = oContext.getProperty(\"expanded\");\r\n\r\n                      // Paneli aç/kapat\r\n                      oModel.setProperty(sPath + \"/expanded\", !bCurrentExpanded);\r\n\r\n                      // Kontrast modunu toggle et\r\n                      if (oContext.getProperty(\"name\") === \"Kontrastmodus\") {\r\n                          onToggleContrast();\r\n                      }\r\n                  }\r\n              }\r\n          }).then((oPopover) => {\r\n              oView.addDependent(oPopover);\r\n              \r\n              // Modelleri popover'a ata. Bu kısım doğruydu.\r\n              oPopover.setModel(oSettingsModel, \"settings\");\r\n              oPopover.setModel(oModulesModel, \"modules\");\r\n\r\n              // ... (diğer olay bağlama kodları aynı kalır)\r\n              const closeButton = Fragment.byId(sFragmentId, \"closePopoverButton\");\r\n              const increaseFontBtn = Fragment.byId(sFragmentId, \"increaseFontButton\");\r\n              const decreaseFontBtn = Fragment.byId(sFragmentId, \"decreaseFontButton\");\r\n              const resetFontBtn = Fragment.byId(sFragmentId, \"resetFontButton\");\r\n              const increaseContrastBtn = Fragment.byId(sFragmentId, \"increaseContrastButton\");\r\n              const decreaseContrastBtn = Fragment.byId(sFragmentId, \"decreaseContrastButton\");\r\n\r\n              closeButton?.attachPress(() => oPopover.close());\r\n              increaseFontBtn?.attachPress(onIncreaseFontSize);\r\n              decreaseFontBtn?.attachPress(onDecreaseFontSize);\r\n              resetFontBtn?.attachPress(onResetFontSize);\r\n              increaseContrastBtn?.attachPress(onIncreaseContrast);\r\n              decreaseContrastBtn?.attachPress(onDecreaseContrast);\r\n              \r\n              return oPopover;\r\n          });\r\n      }\r\n\r\n      const oPopover = await controller._pPopover;\r\n      oPopover.openBy(oEvent.getSource());\r\n  };\n\n  const __esModule = true ;\n\n  exports.__esModule = __esModule;\n  exports.openPopover = openPopover;\n\n}));\n",
      "relatedPaths": [
        "C:\\Users\\UgurBiricik\\Desktop\\ts\\package\\popoverModules.js",
        "C:\\Users\\UgurBiricik\\Desktop\\ts\\package\\js\\cssLoader.js",
        "C:\\Users\\UgurBiricik\\Desktop\\ts\\package\\js\\fontsize.js",
        "C:\\Users\\UgurBiricik\\Desktop\\ts\\package\\js\\contrast.js",
        "C:\\Users\\UgurBiricik\\Desktop\\ts\\package\\index.js"
      ],
      "imports": [
        "sap/ui/model/json/JSONModel",
        "sap/ui/core/Fragment"
      ],
      "dynamicImports": [],
      "generated": false,
      "isWebComponent": false,
      "isEntryPoint": true
    },
    {
      "name": "new-npm-package/css/style.css",
      "path": "C:\\Users\\UgurBiricik\\Desktop\\ts\\package\\css\\style.css",
      "code": "/* Sadece bizim özel popover'ımızı hedef al */\r\n@import \"./fontsize.css\";\r\n\r\n.myCustomPopover.sapMPopover {\r\n    border: 2px solid darkcyan;\r\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.myCustomPopover .sapMPopoverHeader {\r\n    background-color: #09c9c9 !important;\r\n}\r\n\r\n.sapMTitle {\r\n    color: rgb(221, 200, 13)\r\n}\r\n\r\n/* Kontrast modu aktif olduğunda uygulanacak stiller */\r\nhtml.high-contrast-mode {\r\n  /* Renkleri ters çevir ve renk tekerleğinde 180 derece döndür.\r\n     Bu, okunabilirliği yüksek bir siyah-beyaz tema oluşturur. */\r\n  filter: invert(1) hue-rotate(180deg) contrast(var(--contrast-level-dynamic, 110%));\r\n  \r\n  /* Arka planı siyah yaparak resimlerin yüklenmesi sırasındaki beyaz parlamaları önle */\r\n  background-color: #000;\r\n}\r\n\r\n/* Resimlerin, videoların ve ikonların renklerinin bozulmaması için onları tekrar ters çevir. */\r\nhtml.high-contrast-mode img,\r\nhtml.high-contrast-mode video,\r\nhtml.high-contrast-mode .sapUiIcon,\r\nhtml.high-contrast-mode .sapMBtnIcon {\r\n   filter: invert(1) hue-rotate(180deg);\r\n}",
      "type": "resource"
    },
    {
      "name": "new-npm-package/Popover.fragment.xml",
      "path": "C:\\Users\\UgurBiricik\\Desktop\\ts\\package\\Popover.fragment.xml",
      "code": "<core:FragmentDefinition\r\n   xmlns=\"sap.m\"\r\n   xmlns:f=\"sap.ui.layout.form\"\r\n   xmlns:l=\"sap.ui.layout\"\r\n   xmlns:core=\"sap.ui.core\">\r\n   <Popover\r\n      class=\"myCustomPopover\"\r\n      id=\"npmPopover\"\r\n      placement=\"Bottom\"\r\n      title=\"Eye Able Assistent\"\r\n      contentWidth=\"300px\">\r\n      <content>\r\n         <List\r\n            id=\"modulesList\"\r\n            items=\"{modules>/items}\"\r\n            showSeparators=\"None\"\r\n            backgroundDesign=\"Transparent\">\r\n            <items>\r\n               <CustomListItem>\r\n                  <content>\r\n                     <Panel\r\n                        expandable=\"{modules>expandable}\"\r\n                        backgroundDesign=\"Transparent\"\r\n                        expanded=\"false\"\r\n                        width=\"auto\">\r\n                        <headerToolbar>\r\n                           <OverflowToolbar press=\".onPanelHeaderPress\">\r\n                              <core:Icon src=\"{modules>icon}\" />\r\n                              <Title text=\"{modules>name}\" />\r\n                           </OverflowToolbar>\r\n                        </headerToolbar>\r\n                        <content>\r\n\r\n                           <f:SimpleForm layout=\"ResponsiveGridLayout\"\r\n                              visible=\"{= ${modules>name} === 'Schriftgröße' }\">\r\n\r\n                              <VBox justifyContent=\"Center\" alignItems=\"Center\" width=\"100%\">\r\n                                 <Button\r\n                                    id=\"fontStepInput\"\r\n                                    text=\"{settings>/fontStep}\"\r\n                                    width=\"150px\"\r\n                                    textAlign=\"Center\" />\r\n                                 <HBox alignItems=\"Center\" width=\"150px\" justifyContent=\"SpaceBetween\">\r\n                                    <Button\r\n                                       id=\"decreaseFontButton\"\r\n                                       icon=\"sap-icon://less\"/>\r\n\r\n                                    <Button\r\n                                       id=\"resetFontButton\"\r\n                                       icon=\"sap-icon://refresh\" />\r\n\r\n                                    <Button\r\n                                       id=\"increaseFontButton\"\r\n                                       icon=\"sap-icon://add\" />\r\n                                 </HBox>\r\n\r\n                              </VBox>\r\n                           </f:SimpleForm>\r\n\r\n                               <!-- YENİ: Kontrast Formu -->\r\n                           <f:SimpleForm layout=\"ResponsiveGridLayout\" visible=\"{= ${modules>name} === 'Kontrastmodus' }\">\r\n                              <l:VerticalLayout class=\"sapUiSmallMargin\">\r\n                                 <Text text=\"Passen Sie den Kontrast der Webseite an.\" class=\"sapUiTinyMarginBottom\"/>\r\n                                 <Toolbar>\r\n                                    <Button id=\"decreaseContrastButton\" icon=\"sap-icon://less\" text=\"Verringern\" />\r\n                                    <ToolbarSpacer/>\r\n                                    <Button id=\"increaseContrastButton\" icon=\"sap-icon://add\" text=\"Erhöhen\" />\r\n                                 </Toolbar>\r\n                              </l:VerticalLayout>\r\n                           </f:SimpleForm>\r\n                        </content>\r\n                     </Panel>\r\n                  </content>\r\n               </CustomListItem>\r\n            </items>\r\n         </List>\r\n      </content>\r\n      <footer>\r\n         <Toolbar>\r\n            <ToolbarSpacer />\r\n            <Button\r\n               id=\"closePopoverButton\"\r\n               text=\"Schließen\" />\r\n         </Toolbar>\r\n      </footer>\r\n   </Popover>\r\n</core:FragmentDefinition>",
      "type": "resource"
    },
    {
      "name": "new-npm-package/css/fontsize.css",
      "path": "C:\\Users\\UgurBiricik\\Desktop\\ts\\package\\css\\fontsize.css",
      "code": "/* ... mevcut popover stilleriniz ... */\r\n\r\n/* YAZI TİPİ BOYUTLANDIRMA STILLERI */\r\nbody.font-level--2 * { font-size: 90% !important; }\r\nbody.font-level--1 * { font-size: 95% !important; }\r\nbody.font-level-1 * { font-size: 110% !important; }\r\nbody.font-level-2 * { font-size: 120% !important; }\r\nbody.font-level-3 * { font-size: 130% !important; }\r\nbody.font-level-4 * { font-size: 140% !important; }\r\nbody.font-level-5 * { font-size: 150% !important; }",
      "type": "resource"
    }
  ]
}